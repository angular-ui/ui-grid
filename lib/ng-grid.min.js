(function(g){g.ng={};g.ng.$http=undefined;var n=angular.module("ngGrid.services",[]);var k=angular.module("ngGrid.directives",[]);var d=angular.module("ngGrid.filters",[]);var b="__ng_selected__";var j="__koGrid__";var m=8;var a=6;var c="asc";var e="desc";var p="_ng_field_";var h="_ng_depth_";var o="_ng_hidden_";var i="_ng_column_";var l=/CUSTOM_FILTERS/g;var f=/<.+>/;ng.moveSelectionHandler=function(t,v,r){if(v===null||v===undefined){return true;}if(v.config.selectedItems===undefined){return true;}var q=r.which||r.keyCode;var w=(q==38?-1:(q==40?1:null));if(!w){return true;}var s=t.renderedRows;var u=s.indexOf(v.selectionService.lastClickedRow)+w;if(u<0||u>=s.length){return true;}v.selectionService.ChangeSelection(s[u],r);if(u>s.length-m){v.$viewport.scrollTop(v.$viewport.scrollTop()+(v.config.rowHeight*2));}else{if(u<m){v.$viewport.scrollTop(v.$viewport.scrollTop()-(v.config.rowHeight*2));}}if(!t.$$phase){t.$digest();}return false;};if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");};}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(r){var q=this.length>>>0;var s=Number(arguments[1])||0;s=(s<0)?Math.ceil(s):Math.floor(s);if(s<0){s+=q;}for(;s<q;s++){if(s in this&&this[s]===r){return s;}}return -1;};}if(!Array.prototype.filter){Array.prototype.filter=function(r){var w=Object(this);var q=w.length>>>0;if(typeof r!=="function"){throw new TypeError();}var v=[];var u=arguments[1];for(var s=0;s<q;s++){if(s in w){var x=w[s];if(r.call(u,x,s,w)){v.push(x);}}}return v;};}ng.utils={visualLength:function(r){var q=document.getElementById("testDataLength");if(!q){q=document.createElement("SPAN");q.id="testDataLength";q.style.visibility="hidden";document.body.appendChild(q);}$(q).css("font",$(r).css("font"));q.innerHTML=$(r).text();return q.offsetWidth;},forIn:function(r,q){for(var s in r){if(r.hasOwnProperty(s)){q(r[s],s);}}},evalProperty:function(t,v){var r=v.split("."),u=0;var q=t[r[u]],s=r.length;u++;while(q&&u<s){q=q[r[u]];u++;}return q;},endsWith:function(r,q){if(!r||!q||typeof r!="string"){return false;}return r.indexOf(q,r.length-q.length)!==-1;},isNullOrUndefined:function(q){if(q===undefined||q===null){return true;}return false;},getElementsByClassName:function(r){var q=[];var v=new RegExp("\\b"+r+"\\b");var u=document.getElementsByTagName("*");for(var t=0;t<u.length;t++){var s=u[t].className;if(v.test(s)){q.push(u[t]);}}return q;},newId:(function(){var q=new Date().getTime();return function(){return q+=1;};})(),ieVersion:(function(){var q=3,s=document.createElement("div"),r=s.getElementsByTagName("i");while(s.innerHTML="<!--[if gt IE "+(++q)+"]><i></i><![endif]-->",r[0]){}return q>4?q:undefined;})()};$.extend(ng.utils,{isIe6:(function(){return ng.utils.ieVersion===6;})(),isIe7:(function(){return ng.utils.ieVersion===7;})(),isIe:(function(){return ng.utils.ieVersion!==undefined;})()});d.filter("ngColumns",function(){return function(q){return q.filter(function(r){return !r.isAggCol;});};});d.filter("checkmark",function(){return function(q){return q?"\u2714":"\u2718";};});n.factory("SortService",function(){var q={};q.colSortFnCache={};q.dateRE=/^(\d\d?)[\/\.-](\d\d?)[\/\.-]((\d\d)?\d\d)$/;q.guessSortFn=function(t){var u,w,s,v,r;if(t===undefined||t===null||t===""){return null;}w=typeof(t);switch(w){case"number":u=q.sortNumber;break;case"boolean":u=q.sortBool;break;default:u=undefined;break;}if(u){return u;}if(Object.prototype.toString.call(t)==="[object Date]"){return q.sortDate;}if(w!=="string"){return q.basicSort;}if(t.match(/^-?[£$¤]?[\d,.]+%?$/)){return q.sortNumberStr;}s=t.match(q.dateRE);if(s){v=parseInt(s[1],10);r=parseInt(s[2],10);if(v>12){return q.sortDDMMStr;}else{if(r>12){return q.sortMMDDStr;}else{return q.sortMMDDStr;}}}return q.sortAlpha;};q.basicSort=function(s,r){if(s==r){return 0;}if(s<r){return -1;}return 1;};q.sortNumber=function(s,r){return s-r;};q.sortNumberStr=function(t,r){var w,v,u=false,s=false;w=parseFloat(t.replace(/[^0-9.-]/g,""));if(isNaN(w)){u=true;}v=parseFloat(r.replace(/[^0-9.-]/g,""));if(isNaN(v)){s=true;}if(u&&s){return 0;}if(u){return 1;}if(s){return -1;}return w-v;};q.sortAlpha=function(t,r){var u=t.toLowerCase(),s=r.toLowerCase();return u==s?0:(u<s?-1:1);};q.sortDate=function(s,r){var u=s.getTime(),t=r.getTime();return u==t?0:(u<t?-1:1);};q.sortBool=function(s,r){if(s&&r){return 0;}if(!s&&!r){return 0;}else{return s?1:-1;}};q.sortDDMMStr=function(t,s){var v,u,w,r,x,z;w=t.match(q.dateRE);z=w[3];r=w[2];x=w[1];if(r.length==1){r="0"+r;}if(x.length==1){x="0"+x;}v=z+r+x;w=s.match(q.dateRE);z=w[3];r=w[2];x=w[1];if(r.length==1){r="0"+r;}if(x.length==1){x="0"+x;}u=z+r+x;if(v==u){return 0;}if(v<u){return -1;}return 1;};q.sortMMDDStr=function(t,s){var v,u,w,r,x,z;w=t.match(q.dateRE);z=w[3];x=w[2];r=w[1];if(r.length==1){r="0"+r;}if(x.length==1){x="0"+x;}v=z+r+x;w=s.match(q.dateRE);z=w[3];x=w[2];r=w[1];if(r.length==1){r="0"+r;}if(x.length==1){x="0"+x;}u=z+r+x;if(v==u){return 0;}if(v<u){return -1;}return 1;};q.sortData=function(v,r){if(!v||!r){return;}var s=r.column,w=r.direction,u,t;if(q.colSortFnCache[s.field]){u=q.colSortFnCache[s.field];}else{if(s.sortingAlgorithm!=undefined){u=s.sortingAlgorithm;q.colSortFnCache[s.field]=s.sortingAlgorithm;}else{t=v[0];if(!t){return;}u=q.guessSortFn(t[s.field]);if(u){q.colSortFnCache[s.field]=u;}else{u=q.sortAlpha;}}}v.sort(function(z,y){var x=ng.utils.evalProperty(z,s.field);var A=ng.utils.evalProperty(y,s.field);if(!A&&!x){return 0;}else{if(!x){return 1;}else{if(!A){return -1;}}}if(w===c){return u(x,A);}else{return 0-u(x,A);}});return;};q.Sort=function(r,s){if(q.isSorting){return;}q.isSorting=true;q.sortData(s,r);q.isSorting=false;};return q;});n.factory("DomUtilityService",function(){var q={};var r=function(){var s=$("<div></div>");s.appendTo("body");s.height(100).width(100).css("position","absolute").css("overflow","scroll");s.append('<div style="height: 400px; width: 400px;"></div>');q.ScrollH=(s.height()-s[0].clientHeight);q.ScrollW=(s.width()-s[0].clientWidth);s.empty();s.attr("style","");s.append('<span style="font-family: Verdana, Helvetica, Sans-Serif; font-size: 14px;"><strong>M</strong></span>');q.LetterW=s.children().first().width();s.remove();};q.eventStorage={};q.AssignGridContainers=function(t,s){s.$root=$(t);s.$topPanel=s.$root.find(".ngTopPanel");s.$groupPanel=s.$root.find(".ngGroupPanel");s.$headerContainer=s.$topPanel.find(".ngHeaderContainer");s.$headerScroller=s.$topPanel.find(".ngHeaderScroller");s.$headers=s.$headerScroller.children();s.$viewport=s.$root.find(".ngViewport");s.$canvas=s.$viewport.find(".ngCanvas");s.$footerPanel=s.$root.find(".ngFooterPanel");q.UpdateGridLayout(s);};q.UpdateGridLayout=function(s){var t=s.$viewport.scrollTop();s.elementDims.rootMaxW=s.$root.width();s.elementDims.rootMaxH=s.$root.height();s.refreshDomSizes();s.adjustScrollTop(t,true);};q.numberOfGrids=0;q.BuildStyles=function(B,t,z){var s=t.config.rowHeight,u=t.$styleSheet,w=t.gridId,y,A=B.visibleColumns(),v=0;if(!u){u=$("#"+w);if(!u[0]){u=$("<style id='"+w+"' type='text/css' rel='stylesheet' />").appendTo(t.$root);}}u.empty();var x=B.totalRowWidth();y="."+w+" .ngCanvas { width: "+x+"px; }."+w+" .ngRow { width: "+x+"px; }."+w+" .ngCanvas { width: "+x+"px; }."+w+" .ngHeaderScroller { width: "+(x+q.scrollH+2)+"px}";angular.forEach(A,function(C,D){y+="."+w+" .col"+D+" { width: "+C.width+"px; left: "+v+"px; right: "+(x-v-C.width)+"px; height: "+s+"px }."+w+" .colt"+D+" { width: "+C.width+"px; }";v+=C.width;});if(ng.utils.isIe){u[0].styleSheet.cssText=y;}else{u[0].appendChild(document.createTextNode(y));}t.$styleSheet=u;if(z){q.digest(B);}};q.digest=function(s){if(!s.$$phase){s.$digest();}};q.ScrollH=17;q.ScrollW=17;q.LetterW=10;r();return q;});ng.defaultGridTemplate=function(){return'<div class="ngTopPanel" ng-class="{\'ui-widget-header\':jqueryUITheme, \'ui-corner-top\': jqueryUITheme}" ng-style="topPanelStyle()"><div class="ngGroupPanel" ng-show="showGroupPanel()" ng-style="headerStyle()"><div class="ngGroupPanelDescription" ng-show="configGroups.length == 0">Drag a column header here and drop it to group by that column</div><ul ng-show="configGroups.length > 0" class="ngGroupList"><li class="ngGroupItem" ng-repeat="group in configGroups"><span class="ngGroupElement"><span class="ngGroupName">{{group.displayName}}<span ng-click="removeGroup($index)" class="ngRemoveGroup">x</span></span><span ng-hide="$last" class="ngGroupArrow"></span></span></li></ul></div><div class="ngHeaderContainer" ng-style="headerStyle()"><div class="ngHeaderScroller" ng-style="headerScrollerStyle()" ng-header-row></div></div><div class="ngHeaderButton" ng-show="showColumnMenu || showFilter" ng-click="toggleShowMenu()"><div class="ngHeaderButtonArrow" ng-click=""></div></div><div ng-show="showMenu" class="ngColMenu"><div ng-show="showFilter"><input placeholder="Search..." type="text" ng-model="filterText"/></div><div ng-show="showColumnMenu"><span class="ngMenuText">Choose Columns:</span><ul class="ngColList"><li class="ngColListItem" ng-repeat="col in columns | ngColumns"><label><input type="checkbox" class="ngColListCheckbox" ng-model="col.visible"/>{{col.displayName}}</label><a title="Group By" ng-class="col.groupedByClass()" ng-show="col.groupable" ng-click="groupBy(col)"></a><span class="ngGroupingNumber" ng-show="col.groupIndex > 0">{{col.groupIndex}}</span></li></ul></div></div></div><div class="ngViewport" ng-class="{\'ui-widget-content\': jqueryUITheme}" ng-style="viewportStyle()"><div class="ngCanvas" ng-style="canvasStyle()"><div ng-style="rowStyle(row)" ng-repeat="row in renderedRows" ng-click="row.toggleSelected($event)" class="ngRow" ng-class="row.alternatingRowClass()" ng-row></div></div></div><div class="ngFooterPanel" ng-class="{\'ui-widget-content\': jqueryUITheme, \'ui-corner-bottom\': jqueryUITheme}" ng-style="footerStyle()"><div class="ngTotalSelectContainer" ng-show="footerVisible"><div class="ngFooterTotalItems" ng-class="{\'ngNoMultiSelect\': !multiSelect}" ><span class="ngLabel">Total Items: {{maxRows()}}</span><span ng-show="filterText.length > 0" class="ngLabel">(Showing Items: {{totalFilteredItemsLength()}})</span></div><div class="ngFooterSelectedItems" ng-show="multiSelect"><span class="ngLabel">Selected Items: {{selectedItems.length}}</span></div></div><div class="ngPagerContainer" style="float: right; margin-top: 10px;" ng-show="footerVisible && enablePaging" ng-class="{\'ngNoMultiSelect\': !multiSelect}"><div style="float:left; margin-right: 10px;" class="ngRowCountPicker"><span style="float: left; margin-top: 3px;" class="ngLabel">Page Size:</span><select style="float: left;height: 27px; width: 100px" ng-model="pagingOptions.pageSize" ><option ng-repeat="size in pagingOptions.pageSizes">{{size}}</option></select></div><div style="float:left; margin-right: 10px; line-height:25px;" class="ngPagerControl" style="float: left; min-width: 135px;"><button class="ngPagerButton" ng-click="pageToFirst()" ng-disabled="cantPageBackward()" title="First Page"><div class="ngPagerFirstTriangle"><div class="ngPagerFirstBar"></div></div></button><button class="ngPagerButton" ng-click="pageBackward()" ng-disabled="cantPageBackward()" title="Previous Page"><div class="ngPagerFirstTriangle ngPagerPrevTriangle"></div></button><input class="ngPagerCurrent" type="text" style="width:50px; height: 24px; margin-top: 1px; padding: 0px 4px;" ng-model="pagingOptions.currentPage"/><button class="ngPagerButton" ng-click="pageForward()" ng-disabled="cantPageForward()" title="Next Page"><div class="ngPagerLastTriangle ngPagerNextTriangle"></div></button><button class="ngPagerButton" ng-click="pageToLast()" ng-disabled="cantPageForward()" title="Last Page"><div class="ngPagerLastTriangle"><div class="ngPagerLastBar"></div></div></button></div></div></div>';};ng.defaultRowTemplate=function(){return'<div ng-style="{\'cursor\': row.cursor}" ng-repeat="col in visibleColumns()" class="ngCell col{{$index}} {{col.cellClass}}" ng-cell></div>';};ng.defaultCellTemplate=function(){return'<div class="ngCellText colt{{$index}}">{{row.getProperty(col.field) CUSTOM_FILTERS}}</div>';};ng.aggregateTemplate=function(){return'<div ng-click="row.toggleExpand()" ng-style="{\'left\': row.offsetleft}" class="ngAggregate"><span class="ngAggregateText">{{row.label CUSTOM_FILTERS}} ({{row.totalChildren()}} items)</span><div class="{{row.aggClass()}}"></div></div>';};ng.defaultHeaderRowTemplate=function(){return'<div ng-repeat="col in visibleColumns()" class="ngHeaderCell col{{$index}}" ng-header-cell></div>';};ng.defaultHeaderCellTemplate=function(){return'<div ng-click="col.sort()" class="ngHeaderSortColumn {{col.headerClass}}" ng-style="{\'cursor\': col.cursor}" ng-class="{ \'ngSorted\': !noSortVisible }"><div class="ngHeaderText colt{{$index}}">{{col.displayName}}</div><div class="ngSortButtonDown" ng-show="col.showSortButtonDown()"></div><div class="ngSortButtonUp" ng-show="col.showSortButtonUp()"></div></div><div ng-show="col.resizable" class="ngHeaderGrip" ng-click="col.gripClick($event)" ng-mousedown="col.gripOnMouseDown($event)"></div>';};ng.Aggregate=function(s,r){var q=this;q.index=0;q.offsetTop=0;q.entity=s;q.label=s.gLabel;q.field=s.gField;q.depth=s.gDepth;q.parent=s.parent;q.children=s.children;q.aggChildren=s.aggChildren;q.aggIndex=s.aggIndex;q.collapsed=true;q.isAggRow=true;q.offsetleft=s.gDepth*25;q.aggLabelFilter=s.aggLabelFilter;q.toggleExpand=function(){q.collapsed=q.collapsed?false:true;q.notifyChildren();};q.setExpand=function(t){q.collapsed=t;q.notifyChildren();};q.notifyChildren=function(){angular.forEach(q.aggChildren,function(u){u.entity[o]=q.collapsed;if(q.collapsed){u.setExpand(q.collapsed);}});angular.forEach(q.children,function(u){u[o]=q.collapsed;});r.rowCache=[];var t=false;angular.forEach(r.aggCache,function(u,v){if(t){var w=(30*q.children.length);u.offsetTop=q.collapsed?u.offsetTop-w:u.offsetTop+w;}else{if(v==q.aggIndex){t=true;}}});r.renderedChange();};q.aggClass=function(){return q.collapsed?"ngAggArrowCollapsed":"ngAggArrowExpanded";};q.totalChildren=function(){if(q.aggChildren.length>0){var t=0;var u=function(v){if(v.aggChildren.length>0){angular.forEach(v.aggChildren,function(w){u(w);});}else{t+=v.children.length;}};u(q);return t;}else{return q.children.length;}};};ng.EventProvider=function(t,s,r){var q=this;q.colToMove=undefined;q.groupToMove=undefined;q.assignEvents=function(){if(t.config.jqueryUIDraggable){t.$groupPanel.droppable({addClasses:false,drop:function(u){q.onGroupDrop(u);}});s.$evalAsync(q.setDraggables);}else{t.$groupPanel.on("mousedown",q.onGroupMouseDown).on("dragover",q.dragOver).on("drop",q.onGroupDrop);t.$headerScroller.on("mousedown",q.onHeaderMouseDown).on("dragover",q.dragOver);if(t.config.enableColumnReordering){t.$headerScroller.on("drop",q.onHeaderDrop);}if(t.config.enableRowReordering){t.$viewport.on("mousedown",q.onRowMouseDown).on("dragover",q.dragOver).on("drop",q.onRowDrop);}}s.$watch("columns",q.setDraggables,true);};q.dragOver=function(u){u.preventDefault();};q.setDraggables=function(){if(!t.config.jqueryUIDraggable){t.$root.find(".ngHeaderSortColumn").attr("draggable","true");}else{t.$root.find(".ngHeaderSortColumn").draggable({helper:"clone",appendTo:"body",stack:"div",addClasses:false,start:function(u){q.onHeaderMouseDown(u);}}).droppable({drop:function(u){q.onHeaderDrop(u);}});}};q.onGroupMouseDown=function(w){var u=$(w.target);if(u[0].className!="ngRemoveGroup"){var v=angular.element(u).scope();if(v){if(!t.config.jqueryUIDraggable){u.attr("draggable","true");}q.groupToMove={header:u,groupName:v.group,index:v.$index};}}else{q.groupToMove=undefined;}};q.onGroupDrop=function(u){u.stopPropagation();var v;var w;if(q.groupToMove){v=$(u.target).closest(".ngGroupElement");if(v.context.className=="ngGroupPanel"){s.configGroups.splice(q.groupToMove.index,1);s.configGroups.push(q.groupToMove.groupName);}else{w=angular.element(v).scope();if(w){if(q.groupToMove.index!=w.$index){s.configGroups.splice(q.groupToMove.index,1);s.configGroups.splice(w.$index,0,q.groupToMove.groupName);}}}q.groupToMove=undefined;t.fixGroupIndexes();}else{if(q.colToMove){if(s.configGroups.indexOf(q.colToMove.col)==-1){v=$(u.target).closest(".ngGroupElement");if(v.context.className=="ngGroupPanel"||v.context.className=="ngGroupPanelDescription"){s.groupBy(q.colToMove.col);}else{w=angular.element(v).scope();if(w){s.removeGroup(w.$index);}}}q.colToMove=undefined;}}if(!s.$$phase){s.$apply();}};q.onHeaderMouseDown=function(w){var v=$(w.target).closest(".ngHeaderSortColumn");var u=angular.element(v).scope();if(u){q.colToMove={header:v,col:u.col};}};q.onHeaderDrop=function(w){if(!q.colToMove){return;}var v=$(w.target).closest(".ngHeaderSortColumn");var u=angular.element(v).scope();if(u){if(q.colToMove.col==u.col){return;}s.columns.splice(q.colToMove.col.index,1);s.columns.splice(u.col.index,0,q.colToMove.col);t.fixColumnIndexes();r.BuildStyles(s,t,true);q.colToMove=undefined;}};q.onRowMouseDown=function(w){var v=$(w.target).closest(".ngRow");var u=angular.element(v).scope();if(u){v.attr("draggable","true");r.eventStorage.rowToMove={targetRow:v,scope:u};}};q.onRowDrop=function(y){var x=$(y.target).closest(".ngRow");var u=angular.element(x).scope();if(u){var z=r.eventStorage.rowToMove;if(z.scope.row==u.row){return;}var w=t.sortedData.indexOf(z.scope.row.entity);var v=t.sortedData.indexOf(u.row.entity);t.sortedData.splice(w,1);t.sortedData.splice(v,0,z.scope.row.entity);t.searchProvider.evalFilter();r.eventStorage.rowToMove=undefined;}};q.assignGridEventHandlers=function(){t.$viewport.on("scroll",function(w){var x=w.target.scrollLeft,v=w.target.scrollTop;t.adjustScrollLeft(x);t.adjustScrollTop(v);});var u=false;t.$viewport.on("keydown",function(w){if(!u){u=true;var v=ng.moveSelectionHandler(s,t,w);u=false;return v;}return false;});if(t.config.tabIndex===-1){t.$viewport.attr("tabIndex",r.numberOfGrids);r.numberOfGrids++;}else{t.$viewport.attr("tabIndex",t.config.tabIndex);}$(g).resize(function(){r.UpdateGridLayout(t);if(t.config.maintainColumnRatios){t.configureColumnWidths();}});};q.assignGridEventHandlers();q.assignEvents();};ng.Column=function(s,x,q,u){var y=this,v=s.colDef,t=500,w=0,r=null;y.width=v.width;y.groupIndex=0;y.isGroupedBy=false;y.minWidth=!v.minWidth?50:v.minWidth;y.maxWidth=!v.maxWidth?9000:v.maxWidth;y.headerRowHeight=s.headerRowHeight;y.displayName=v.displayName||v.field;y.index=s.index;y.isAggCol=s.isAggCol;y.cellClass=v.cellClass;y.cellFilter=v.cellFilter?v.cellFilter:"";y.field=v.field;y.aggLabelFilter=v.cellFilter||v.aggLabelFilter;y.visible=ng.utils.isNullOrUndefined(v.visible)||v.visible;y.sortable=false;y.resizable=false;y.groupable=ng.utils.isNullOrUndefined(v.groupable)||v.sortable;if(s.enableSort){y.sortable=ng.utils.isNullOrUndefined(v.sortable)||v.sortable;}if(s.enableResize){y.resizable=ng.utils.isNullOrUndefined(v.resizable)||v.resizable;}y.sortDirection=undefined;y.sortingAlgorithm=v.sortFn;y.headerClass=v.headerClass;y.headerCellTemplate=v.headerCellTemplate||ng.defaultHeaderCellTemplate();y.cursor=y.sortable?"pointer":"default";y.cellTemplate=v.cellTemplate||ng.defaultCellTemplate().replace(l,y.cellFilter?"|"+y.cellFilter:"");if(v.cellTemplate&&!f.test(v.cellTemplate)){y.cellTemplate=$.ajax({type:"GET",url:v.cellTemplate,async:false}).responseText;}if(v.headerCellTemplate&&!f.test(v.headerCellTemplate)){y.headerCellTemplate=$.ajax({type:"GET",url:v.headerCellTemplate,async:false}).responseText;}y.groupedByClass=function(){return y.isGroupedBy?"ngGroupedByIcon":"ngGroupIcon";};y.toggleVisible=function(){y.visible=!y.visible;};y.showSortButtonUp=function(){return y.sortable?y.sortDirection===e:y.sortable;};y.showSortButtonDown=function(){return y.sortable?y.sortDirection===c:y.sortable;};y.noSortVisible=function(){return !y.sortDirection;};y.sort=function(){if(!y.sortable){return true;}var z=y.sortDirection===c?e:c;y.sortDirection=z;s.sortCallback(y);return false;};y.gripClick=function(){w++;if(w===1){r=setTimeout(function(){w=0;},t);}else{clearTimeout(r);s.resizeOnDataCallback(y);w=0;}};y.gripOnMouseDown=function(z){if(z.ctrlKey){y.toggleVisible();u.BuildStyles(x,q);return true;}z.target.parentElement.style.cursor="col-resize";y.startMousePosition=z.clientX;y.origWidth=y.width;$(document).mousemove(y.onMouseMove);$(document).mouseup(y.gripOnMouseUp);return false;};y.onMouseMove=function(A){var B=A.clientX-y.startMousePosition;var z=B+y.origWidth;y.width=(z<y.minWidth?y.minWidth:(z>y.maxWidth?y.maxWidth:z));u.BuildStyles(x,q);return false;};y.gripOnMouseUp=function(){$(document).off("mousemove");$(document).off("mouseup");event.target.parentElement.style.cursor="default";u.digest(x);return false;};};ng.Dimension=function(q){this.outerHeight=null;this.outerWidth=null;$.extend(this,q);};ng.Footer=function(q,r){q.maxRows=function(){var s=Math.max(q.pagingOptions.totalServerItems,r.sortedData.length);return s;};q.multiSelect=(r.config.canSelectRows&&r.config.multiSelect);q.selectedItemCount=r.selectedItemCount;q.maxPages=function(){return Math.ceil(q.maxRows()/q.pagingOptions.pageSize);};q.pageForward=function(){var s=q.pagingOptions.currentPage;q.pagingOptions.currentPage=Math.min(s+1,q.maxPages());};q.pageBackward=function(){var s=q.pagingOptions.currentPage;q.pagingOptions.currentPage=Math.max(s-1,1);};q.pageToFirst=function(){q.pagingOptions.currentPage=1;};q.pageToLast=function(){var s=q.maxPages();q.pagingOptions.currentPage=s;};q.cantPageForward=function(){var t=q.pagingOptions.currentPage;var s=q.maxPages();return !(t<s);};q.cantPageBackward=function(){var s=q.pagingOptions.currentPage;return !(s>1);};};ng.RowFactory=function(s,r){var q=this;q.rowCache=[];q.aggCache={};q.parentCache=[];q.dataChanged=true;q.parsedData=[];q.rowConfig={};q.selectionService=s.selectionService;q.rowHeight=30;q.numberOfAggregates=0;q.groupedData=undefined;q.rowHeight=s.config.rowHeight;q.rowConfig={canSelectRows:s.config.canSelectRows,rowClasses:s.config.rowClasses,selectedItems:s.config.selectedItems,selectWithCheckboxOnly:s.config.selectWithCheckboxOnly,beforeSelectionChangeCallback:s.config.beforeSelectionChange,afterSelectionChangeCallback:s.config.afterSelectionChange,jqueryUITheme:s.config.jqueryUITheme};q.renderedRange=new ng.Range(0,s.minRowsToRender()+m);q.buildEntityRow=function(t,v){var u=q.rowCache[v];if(!u){u=new ng.Row(t,q.rowConfig,q.selectionService);u.rowIndex=v+1;u.offsetTop=q.rowHeight*v;u.selected=t[b];q.rowCache[v]=u;}return u;};q.buildAggregateRow=function(v,u){var t=q.aggCache[v.aggIndex];if(!t){t=new ng.Aggregate(v,q);q.aggCache[v.aggIndex]=t;}t.index=u+1;t.offsetTop=q.rowHeight*u;return t;};q.UpdateViewableRange=function(t){q.renderedRange=t;q.renderedChange();};q.filteredDataChanged=function(){if(s.lateBoundColumns&&s.filteredData.length>1){s.config.columnDefs=undefined;s.buildColumns();s.lateBoundColumns=false;}q.dataChanged=true;q.rowCache=[];if(s.config.groups.length>0){q.getGrouping(s.config.groups);}q.UpdateViewableRange(q.renderedRange);};q.renderedChange=function(){if(!q.groupedData||s.config.groups.length<1){q.renderedChangeNoGroups();s.refreshDomSizes();return;}q.parentCache=[];var u=[];var t=q.parsedData.filter(function(v){return v[o]===false;}).slice(q.renderedRange.topRow,q.renderedRange.bottomRow);angular.forEach(t,function(w,v){var x;if(w.isAggRow){x=q.buildAggregateRow(w,q.renderedRange.topRow+v);}else{x=q.buildEntityRow(w,q.renderedRange.topRow+v);}u.push(x);});s.setRenderedRows(u);};q.renderedChangeNoGroups=function(){var u=[];var t=s.filteredData.slice(q.renderedRange.topRow,q.renderedRange.bottomRow);angular.forEach(t,function(w,v){var x=q.buildEntityRow(w,q.renderedRange.topRow+v);u.push(x);});s.setRenderedRows(u);};q.parseGroupData=function(u){if(u.values){angular.forEach(u.values,function(w){q.parentCache[q.parentCache.length-1].children.push(w);q.parsedData.push(w);});}else{for(var v in u){if(v==p||v==h||v==i){continue;}else{if(u.hasOwnProperty(v)){var t=q.buildAggregateRow({gField:u[p],gLabel:v,gDepth:u[h],isAggRow:true,_ng_hidden_:false,children:[],aggChildren:[],aggIndex:q.numberOfAggregates,aggLabelFilter:u[i].aggLabelFilter},0);q.numberOfAggregates++;t.parent=q.parentCache[t.depth-1];if(t.parent){t.parent.collapsed=false;t.parent.aggChildren.push(t);}q.parsedData.push(t.entity);q.parentCache[t.depth]=t;q.parseGroupData(u[v]);}}}}};q.getGrouping=function(t){q.aggCache=[];q.rowCache=[];q.numberOfAggregates=0;q.groupedData={};var u=s.filteredData;var w=t.length;var v=r.columns;angular.forEach(u,function(x){x[o]=true;var y=q.groupedData;angular.forEach(t,function(A,C){if(!v[C].isAggCol&&C<=w){v.splice(x.gDepth,0,new ng.Column({colDef:{field:"",width:25,sortable:false,resizable:false,headerCellTemplate:'<div class="ngAggHeader"></div>'},isAggCol:true,index:x.gDepth,headerRowHeight:s.config.headerRowHeight}));}var z=v.filter(function(D){return D.field==A;})[0];var B=ng.utils.evalProperty(x,A);B=B?B.toString():"null";if(!y[B]){y[B]={};}if(!y[p]){y[p]=A;}if(!y[h]){y[h]=C;}if(!y[i]){y[i]=z;}y=y[B];});if(!y.values){y.values=[];}y.values.push(x);});s.fixColumnIndexes();q.parsedData.length=0;q.parseGroupData(q.groupedData);};if(s.config.groups.length>0&&s.filteredData.length>0){q.getGrouping(s.config.groups);}};ng.Grid=function(s,t,w,r,v){var u={afterSelectionChange:function(){},beforeSelectionChange:function(){return true;},canSelectRows:true,columnDefs:undefined,data:[],displaySelectionCheckbox:true,enableColumnResize:true,enableColumnReordering:true,enablePaging:false,enableRowReordering:true,enableSorting:true,filterOptions:{filterText:"",useExternalFilter:false},footerRowHeight:55,displayFooter:undefined,footerVisible:true,groups:[],headerRowHeight:30,headerRowTemplate:undefined,jqueryUIDraggable:false,jqueryUITheme:false,keepLastSelected:true,maintainColumnRatios:undefined,multiSelect:true,pagingOptions:{pageSizes:[250,500,1000],pageSize:250,totalServerItems:0,currentPage:1},plugins:[],rowHeight:30,rowTemplate:undefined,selectedItems:[],selectWithCheckboxOnly:false,showColumnMenu:true,showFilter:true,showGroupPanel:false,sortInfo:undefined,tabIndex:-1,useExternalSorting:false},q=this;q.maxCanvasHt=0;q.config=$.extend(u,t);if(typeof t.columnDefs=="string"){q.config.columnDefs=s.$eval(t.columnDefs);}q.gridId="ng"+ng.utils.newId();q.$root=null;q.$groupPanel=null;q.$topPanel=null;q.$headerContainer=null;q.$headerScroller=null;q.$headers=null;q.$viewport=null;q.$canvas=null;q.rootDim=q.config.gridDim;q.sortInfo=q.config.sortInfo;q.sortedData=[];q.lateBindColumns=false;q.filteredData=[];if(typeof q.config.data=="object"){q.sortedData=q.config.data;}q.lastSortedColumn=undefined;q.calcMaxCanvasHeight=function(){return(q.config.groups.length>0)?(q.rowFactory.parsedData.filter(function(x){return x[o]===false;}).length*q.config.rowHeight):(q.filteredData.length*q.config.rowHeight);};q.elementDims={scrollW:0,scrollH:0,rowIndexCellW:25,rowSelectedCellW:25,rootMaxW:0,rootMaxH:0};q.setRenderedRows=function(x){s.renderedRows=x;if(!s.$$phase){s.$digest();}q.refreshDomSizes();s.$emit("ngGridEventRows",x);};q.minRowsToRender=function(){var x=s.viewportDimHeight()||1;return Math.floor(x/q.config.rowHeight);};q.refreshDomSizes=function(){var x=new ng.Dimension();x.outerWidth=q.elementDims.rootMaxW;x.outerHeight=q.elementDims.rootMaxH;q.rootDim=x;q.maxCanvasHt=q.calcMaxCanvasHeight();};q.buildColumnDefsFromData=function(){if(!q.config.columnDefs){q.config.columnDefs=[];}if(!q.sortedData||!q.sortedData[0]){q.lateBoundColumns=true;return;}var x;x=q.sortedData[0];ng.utils.forIn(x,function(z,y){if(y!=b){q.config.columnDefs.push({field:y});}});};q.buildColumns=function(){var z=q.config.columnDefs,y=[],x=0;if(!z){q.buildColumnDefsFromData();z=q.config.columnDefs;}if(q.config.displaySelectionCheckbox){x=1;y.push(new ng.Column({colDef:{field:"\u2714",width:q.elementDims.rowSelectedCellW,sortable:false,resizable:false,groupable:false,headerCellTemplate:'<input class="ngSelectionHeader" type="checkbox" ng-show="multiSelect" ng-model="allSelected" ng-change="toggleSelectAll(allSelected)"/>',cellTemplate:'<div class="ngSelectionCell"><input class="ngSelectionCheckbox" type="checkbox" ng-checked="row.selected" /></div>'},index:0,headerRowHeight:q.config.headerRowHeight,sortCallback:q.sortData,resizeOnDataCallback:q.resizeOnData,enableResize:q.config.enableColumnResize,enableSort:q.config.enableSorting},s,q,r,v));}if(z.length>0){angular.forEach(z,function(D,A){A+=x;var B=new ng.Column({colDef:D,index:A,headerRowHeight:q.config.headerRowHeight,sortCallback:q.sortData,resizeOnDataCallback:q.resizeOnData,enableResize:q.config.enableColumnResize,enableSort:q.config.enableSorting},s,q,r);y.push(B);var C=q.config.groups.indexOf(D.field);if(C!=-1){s.configGroups.splice(C,0,B);}});s.columns=y;}};q.configureColumnWidths=function(){var E=q.config.columnDefs;var A=q.config.displaySelectionCheckbox?s.configGroups.length+1:s.configGroups.length;var x=E.length+A,C=[],F=[],D=0,B=0;B+=q.config.displaySelectionCheckbox?25:0;angular.forEach(E,function(H,J){J+=A;var K=false,I=undefined;if(ng.utils.isNullOrUndefined(H.width)){H.width="*";}else{K=isNaN(H.width)?ng.utils.endsWith(H.width,"%"):false;I=K?H.width:parseInt(H.width,10);}if(isNaN(I)){I=H.width;if(I=="auto"){s.columns[J].width=H.minWidth;B+=s.columns[J].width;var G=s.columns[J];s.$evalAsync(function(){q.resizeOnData(G,true);});return;}else{if(I.indexOf("*")!=-1){D+=I.length;H.index=J;C.push(H);return;}else{if(K){H.index=J;F.push(H);return;}else{throw'unable to parse column width, use percentage ("10%","20%", etc...) or "*" to use remaining width of grid';}}}}else{B+=s.columns[J].width=parseInt(H.width,10);}});if(C.length>0){q.config.maintainColumnRatios===false?angular.noop():q.config.maintainColumnRatios=true;var z=q.rootDim.outerWidth-B;var y=Math.floor(z/D);angular.forEach(C,function(G){var H=G.width.length;s.columns[G.index].width=y*H;if(G.index+1==x){var I=2;if(q.maxCanvasHt>s.viewportDimHeight()){I+=r.ScrollW;}s.columns[G.index].width-=I;}B+=s.columns[G.index].width;});}if(F.length>0){angular.forEach(F,function(G){var H=G.width;s.columns[G.index].width=Math.floor(q.rootDim.outerWidth*(parseInt(H.slice(0,-1),10)/100));});}};q.init=function(){q.selectionService=new ng.SelectionService(q);q.rowFactory=new ng.RowFactory(q,s);q.selectionService.Initialize(q.rowFactory);q.searchProvider=new ng.SearchProvider(s,q,v);q.styleProvider=new ng.StyleProvider(s,q,r);q.buildColumns();s.$watch("configGroups",function(x){var y=[];angular.forEach(x,function(z){y.push(z.field||z);});q.config.groups=y;q.rowFactory.filteredDataChanged();s.$emit("ngGridEventGroups",x);},true);s.$watch("columns",function(x){r.BuildStyles(s,q,true);s.$emit("ngGridEventColumns",x);},true);q.maxCanvasHt=q.calcMaxCanvasHeight();if(q.config.sortInfo){q.config.sortInfo.column=s.columns.filter(function(x){return x.field==q.config.sortInfo.field;})[0];q.config.sortInfo.column.sortDirection=q.config.sortInfo.direction.toUpperCase();q.sortData(q.config.sortInfo.column);}};q.prevScrollTop=0;q.prevScrollIndex=0;q.adjustScrollTop=function(y,x){if(q.prevScrollTop===y&&!x){return;}var z=Math.floor(y/q.config.rowHeight);if(q.prevScrollTop<y&&z<q.prevScrollIndex+a){return;}if(q.prevScrollTop>y&&z>q.prevScrollIndex-a){return;}q.prevScrollTop=y;q.rowFactory.UpdateViewableRange(new ng.Range(Math.max(0,z-m),z+q.minRowsToRender()+m));q.prevScrollIndex=z;};q.adjustScrollLeft=function(x){if(q.$headerContainer){q.$headerContainer.scrollLeft(x);}};q.resizeOnData=function(y){var z=y.minWidth;var x=ng.utils.getElementsByClassName("col"+y.index);angular.forEach(x,function(E,B){var C;if(B===0){var D=$(E).find(".ngHeaderText");C=ng.utils.visualLength(D)+10;}else{var A=$(E).find(".ngCellText");C=ng.utils.visualLength(A)+10;}if(C>z){z=C;}});y.width=y.longest=Math.min(y.maxWidth,z+7);r.BuildStyles(s,q,true);};q.sortData=function(x){q.config.sortInfo={column:x,field:x.field,direction:x.sortDirection};q.clearSortingData(x);if(!q.config.useExternalSorting){w.Sort(q.config.sortInfo,q.sortedData);}q.lastSortedColumn=x;q.searchProvider.evalFilter();s.$emit("ngGridEventSorted",x);};q.clearSortingData=function(x){if(!x){angular.forEach(s.columns,function(y){y.sortDirection="";});}else{if(q.lastSortedColumn&&x!=q.lastSortedColumn){q.lastSortedColumn.sortDirection="";}}};q.fixColumnIndexes=function(){angular.forEach(s.columns,function(x,y){x.index=y;});};q.fixGroupIndexes=function(){angular.forEach(s.configGroups,function(y,x){y.groupIndex=x+1;});};s.elementsNeedMeasuring=true;s.columns=[];s.renderedRows=[];s.headerRow=null;s.rowHeight=q.config.rowHeight;s.jqueryUITheme=q.config.jqueryUITheme;s.footer=null;s.selectedItems=q.config.selectedItems;s.multiSelect=q.config.multiSelect;s.footerVisible=ng.utils.isNullOrUndefined(q.config.displayFooter)?q.config.footerVisible:q.config.displayFooter;s.footerRowHeight=s.footerVisible?q.config.footerRowHeight:0;s.showColumnMenu=q.config.showColumnMenu;s.showMenu=false;s.configGroups=[];s.enablePaging=q.config.enablePaging;s.pagingOptions=q.config.pagingOptions;s.rowTemplate=q.config.rowTemplate||ng.defaultRowTemplate();s.headerRowTemplate=q.config.headerRowTemplate||ng.defaultHeaderRowTemplate();if(q.config.rowTemplate&&!f.test(q.config.rowTemplate)){s.rowTemplate=$.ajax({type:"GET",url:q.config.rowTemplate,async:false}).responseText;}if(q.config.headerRowTemplate&&!f.test(q.config.headerRowTemplate)){s.headerRowTemplate=$.ajax({type:"GET",url:q.config.headerRowTemplate,async:false}).responseText;}s.visibleColumns=function(){return s.columns.filter(function(x){return x.visible;});};s.toggleShowMenu=function(){s.showMenu=!s.showMenu;};s.toggleSelectAll=function(x){q.selectionService.toggleSelectAll(x);};s.totalFilteredItemsLength=function(){return q.filteredData.length;};s.showGroupPanel=function(){return q.config.showGroupPanel;};s.topPanelHeight=function(){return q.config.showGroupPanel===true?q.config.headerRowHeight*2:q.config.headerRowHeight;};s.viewportDimHeight=function(){return Math.max(0,q.rootDim.outerHeight-s.topPanelHeight()-s.footerRowHeight-2);};s.groupBy=function(x){if(q.sortedData.length<1||!x.groupable){return;}var y=s.configGroups.indexOf(x);if(y==-1){x.isGroupedBy=true;s.configGroups.push(x);x.groupIndex=s.configGroups.length;}else{s.removeGroup(y);}};s.removeGroup=function(y){var x=s.columns.filter(function(z){return z.groupIndex==(y+1);})[0];x.isGroupedBy=false;x.groupIndex=0;if(s.columns[y].isAggCol){s.columns.splice(y,1);s.configGroups.splice(y,1);q.fixGroupIndexes();}if(s.configGroups.length===0){q.fixColumnIndexes();r.digest(s);}};s.totalRowWidth=function(){var x=0,y=s.visibleColumns();angular.forEach(y,function(z){x+=z.width;});return x;};s.headerScrollerDim=function(){var y=s.viewportDimHeight(),z=q.maxCanvasHt,A=(z>y),x=new ng.Dimension();x.autoFitHeight=true;x.outerWidth=s.totalRowWidth();if(A){x.outerWidth+=q.elementDims.scrollW;}else{if((z-y)<=q.elementDims.scrollH){x.outerWidth+=q.elementDims.scrollW;}}return x;};q.init();};ng.Range=function(r,q){this.topRow=r;this.bottomRow=q;};ng.Row=function(s,t,u){var r=this,q=t.canSelectRows;r.jqueryUITheme=t.jqueryUITheme;r.rowClasses=t.rowClasses;r.entity=s;r.selectionService=u;r.selected=false;r.cursor=q?"pointer":"default";r.continueSelection=function(v){r.selectionService.ChangeSelection(r,v);};r.toggleSelected=function(w){if(!q){return true;}var v=w.target||w;if(v.type=="checkbox"&&v.parentElement.className!="ngSelectionCell ng-scope"){return true;}if(t.selectWithCheckboxOnly&&v.type!="checkbox"){return true;}else{if(r.beforeSelectionChange(r)){r.continueSelection(w);return r.afterSelectionChange();}}return false;};r.rowIndex=0;r.offsetTop=0;r.rowDisplayIndex=0;r.alternatingRowClass=function(){var w=(r.rowIndex%2)===0;var v={selected:r.selected,"ui-state-default":r.jqueryUITheme&&w,"ui-state-active":r.jqueryUITheme&&!w,even:w,odd:!w};return v;};r.beforeSelectionChange=t.beforeSelectionChangeCallback;r.afterSelectionChange=t.afterSelectionChangeCallback;r.propertyCache={};r.getProperty=function(v){return r.propertyCache[v]||ng.utils.evalProperty(r.entity,v);};if(r.entity[b]===undefined){r.entity[b]=false;}else{if(r.entity[b]){r.selectionService.setSelection(r,r.entity[b]);}}};ng.SearchProvider=function(t,u,w){var s=this,q=[];s.extFilter=u.config.filterOptions.useExternalFilter;t.showFilter=u.config.showFilter;t.filterText=u.config.filterOptions.filterText;s.fieldMap={};s.evalFilter=function(){if(q.length===0){u.filteredData=u.sortedData;}else{u.filteredData=u.sortedData.filter(function(H){for(var C=0,E=q.length;C<E;C++){var B=q[C];if(!B.column){for(var y in H){if(H.hasOwnProperty(y)){if(y==b){continue;}var F=s.fieldMap[y];var D=(F&&F.cellFilter)?w(F.cellFilter):null;var x=H[y];if(x&&(B.regex.test(x.toString())||(D&&B.regex.test(D(x).toString())))){return true;}}}return false;}var A=s.fieldMap[B.columnDisplay];if(!A){return false;}var z=A.cellFilter?w(A.cellFilter):null;var G=H[B.column]||H[A.field];if((!G||!B.regex.test(G.toString()))&&!(typeof z=="function"&&B.regex.test(z(G)))){return false;}}return true;});}u.rowFactory.filteredDataChanged();};var r=function(z,x){try{return new RegExp(z,x);}catch(y){return new RegExp(z.replace(/(\^|\$|\(|\)|\<|\>|\[|\]|\{|\}|\\|\||\.|\*|\+|\?)/g,"\\$1"));}};var v=function(x){q=[];var z="";if(!(z=$.trim(x))){return;}var y=z.split(";");$.each(y,function(C,D){var B=D.split(":");if(B.length>1){var A=$.trim(B[0]);var F=$.trim(B[1]);if(A&&F){q.push({column:A,columnDisplay:A.replace(/\s+/g,"").toLowerCase(),regex:r(F,"i")});}}else{var E=$.trim(B[0]);if(E){q.push({column:"",regex:r(E,"i")});}}});};t.$watch("filterText",function(x){if(!s.extFilter){v(x);s.evalFilter();}});if(!s.extFilter){t.$watch("columns",function(x){angular.forEach(x,function(y){s.fieldMap[y.field]=y;s.fieldMap[y.displayName.toLowerCase().replace(/\s+/g,"")]=y;});});}};ng.SelectionService=function(r){var q=this;q.multi=r.config.multiSelect;q.selectedItems=r.config.selectedItems;q.selectedIndex=r.config.selectedIndex;q.lastClickedRow=undefined;q.ignoreSelectedItemChanges=false;q.rowFactory={};q.Initialize=function(s){q.rowFactory=s;};q.ChangeSelection=function(v,t){if(t&&t.shiftKey&&q.multi){if(q.lastClickedRow){var u=r.filteredData.indexOf(v.entity);var s=r.filteredData.indexOf(q.lastClickedRow.entity);if(u==s){return false;}s++;if(u<s){u=u^s;s=u^s;u=u^s;}var w=[];for(;s<=u;s++){w.push(q.rowFactory.rowCache[s]);}if(w[w.length-1].beforeSelectionChange(w,t)){$.each(w,function(y,x){x.selected=true;x.entity[b]=true;if(q.selectedItems.indexOf(x.entity)===-1){q.selectedItems.push(x.entity);}});w[w.length-1].afterSelectionChange(w,t);}q.lastClickedRow=w[w.length-1];return true;}}else{if(!q.multi){if(q.lastClickedRow&&q.lastClickedRow!=v){q.setSelection(q.lastClickedRow,false);}q.setSelection(v,r.config.keepLastSelected?true:!v.selected);}else{q.setSelection(v,!v.selected);}}q.lastClickedRow=v;return true;};q.setSelection=function(u,s){u.selected=s;u.entity[b]=s;if(!s){var t=q.selectedItems.indexOf(u.entity);q.selectedItems.splice(t,1);}else{if(q.selectedItems.indexOf(u.entity)===-1){q.selectedItems.push(u.entity);}}};q.toggleSelectAll=function(s){var t=q.selectedItems.length;if(t>0){q.selectedItems.splice(0,t);}angular.forEach(r.filteredData,function(u){u[b]=s;if(s){q.selectedItems.push(u);}});angular.forEach(q.rowFactory.rowCache,function(u){u.selected=s;});};};ng.StyleProvider=function(r,s,q){r.headerCellStyle=function(t){return{height:t.headerRowHeight+"px"};};r.rowStyle=function(t){return{top:t.offsetTop+"px",height:r.rowHeight+"px"};};r.canvasStyle=function(){return{height:s.maxCanvasHt.toString()+"px"};};r.headerScrollerStyle=function(){return{height:s.config.headerRowHeight+"px"};};r.topPanelStyle=function(){return{width:s.rootDim.outerWidth+"px",height:r.topPanelHeight()+"px"};};r.headerStyle=function(){return{width:(s.rootDim.outerWidth-q.ScrollW)+"px",height:s.config.headerRowHeight+"px"};};r.viewportStyle=function(){return{width:s.rootDim.outerWidth+"px",height:r.viewportDimHeight()+"px"};};r.footerStyle=function(){return{width:s.rootDim.outerWidth+"px",height:r.footerRowHeight+"px"};};};k.directive("ngGrid",["$compile","$filter","SortService","DomUtilityService",function(r,t,u,q){var s={scope:true,compile:function(){return{pre:function(B,w,z){var C=$(w);var D=B.$eval(z.ngGrid);D.gridDim=new ng.Dimension({outerHeight:$(C).height(),outerWidth:$(C).width()});var v=new ng.Grid(B,D,u,q,t);if(typeof D.columnDefs=="string"){B.$parent.$watch(D.columnDefs,function(E){B.columns=[];v.config.columnDefs=E;v.buildColumns();v.configureColumnWidths();q.BuildStyles(B,v);v.eventProvider.assignEvents();});}if(typeof D.data=="string"){var y=0;var A=function(E){y=E.length;v.sortedData=B.$eval(D.data)||[];v.searchProvider.evalFilter();v.configureColumnWidths();v.refreshDomSizes();if(v.config.sortInfo){if(!v.config.sortInfo.column){v.config.sortInfo.column=B.columns.filter(function(F){return F.field==v.config.sortInfo.field;})[0];if(!v.config.sortInfo.column){return;}}v.config.sortInfo.column.sortDirection=v.config.sortInfo.direction.toLowerCase();v.sortData(v.config.sortInfo.column);}};B.$parent.$watch(D.data,A);B.$parent.$watch(D.data+".length",function(E){if(E!=y){A(B.$eval(D.data));}});}var x=ng.defaultGridTemplate(v.config);v.footerController=new ng.Footer(B,v);w.addClass("ngGrid").addClass(v.gridId.toString());if(D.jqueryUITheme){w.addClass("ui-widget");}w.append(r(x)(B));q.AssignGridContainers(w,v);v.configureColumnWidths();v.eventProvider=new ng.EventProvider(v,B,q);angular.forEach(D.plugins,function(E){E.init(B.$new(),v,{SortService:u,DomUtilityService:q});});return null;}};}};return s;}]);k.directive("ngRow",["$compile",function(r){var q={scope:false,compile:function(){return{pre:function(s,u){if(s.row.isAggRow){var t=ng.aggregateTemplate();if(s.row.aggLabelFilter){t=t.replace(l,"| "+s.row.aggLabelFilter);}else{t=t.replace(l,"");}u.append(r(t)(s));}else{u.append(r(s.rowTemplate)(s));}}};}};return q;}]);k.directive("ngCell",["$compile",function(r){var q={scope:false,compile:function(){return{pre:function(s,t){t.append(r(s.col.cellTemplate)(s));}};}};return q;}]);k.directive("ngHeaderRow",["$compile",function(q){var r={scope:false,compile:function(){return{pre:function(s,t){if(t.children().length===0){t.append(q(s.headerRowTemplate)(s));}}};}};return r;}]);k.directive("ngHeaderCell",["$compile",function(q){var r={scope:false,compile:function(){return{pre:function(s,t){t.append(q(s.col.headerCellTemplate)(s));}};}};return r;}]);angular.module("ngGrid",["ngGrid.services","ngGrid.directives","ngGrid.filters"]);}(window));